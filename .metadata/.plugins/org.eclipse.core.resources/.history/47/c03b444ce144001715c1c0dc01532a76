package main;

import core.Player;
import graphics.GUI;
import graphics.Graphics3D;
import io.Input;

/**
 * This class contains the code that defines the bahaviour of the game itself, as opposed to the framework.
 * The mainGameLoop() function is run 60 times a second and executes all the game logic
 * @author David
 * @version 1.0
 */
public class GameCode 
{
	/**
	 * This function is run when the game is first started up. 
	 * It will do all the setup needed to make the game work, as well as load the first level
	 * @param graphicsHandler
	 * @param player
	 */
	public static void onGameStart(Graphics3D graphicsHandler, Player player)
	{
		/**
		 * BEGIN SAMPLE LEVEL
		 */
		
		//This image is shown when the game starts up
		GUI gameStartImage = new GUI("../Images/GameStart.png");
		
		//Add the image to the scene so that it is actually drawn
		graphicsHandler.AddGUIImage(gameStartImage);
	}
	
	/**
	 * This function is run 60 times each second and contains the main game code to be run.
	 * This includes things like updating the player, enemies, etc.
	 * @param graphicsHandler
	 * @param player
	 */
	public static void mainGameLoop(Graphics3D graphicsHandler, Player player)
	{
		//Redraw the graphics each frame
		graphicsHandler.Repaint();
		
		//This updates the player's position, rotation etc.
		player.update();
		
		//Rotate the player when the mouse moves. This is currently turned off
		player.rotate(0, Input.GetMouseDeltaPosition().getX() / 1000, 0);
		
		//Update the input class. This checks which keys are pressed etc.
		Input.Update();
		
		
		//Use the 'a' and 'd' keys to move left and right
		if(Input.IsKeyDown('a'))
		{
			player.move(-1, 0, 0);
		}
		
		if(Input.IsKeyDown('d'))
		{
			player.move(1, 0, 0);
		}
		
		//If the 'q' key is pressed, quit the game
		if(Input.IsKeyDown('q'))
		{
			System.exit(0);
		}
	}
}
